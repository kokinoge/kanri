# Claude Codeä¾é ¼ç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆé›†

## ğŸ¯ Phase 1: ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆ

### Claude Codeã¸ã®åˆå›ä¾é ¼æ–‡

```
ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æ”¯æ´ä»£ç†åº—å‘ã‘äºˆç®—ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

## ä½œæˆã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«
- src/components/layout/Layout.tsx
- src/components/layout/Header.tsx  
- src/components/layout/Sidebar.tsx

## è¦ä»¶
1. Next.js 15 + TypeScript + Tailwind CSSä½¿ç”¨
2. èªè¨¼çŠ¶æ…‹ã«å¿œã˜ãŸè¡¨ç¤ºåˆ¶å¾¡
3. ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³å¯¾å¿œ
4. ä»¥ä¸‹ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’å«ã‚€ï¼š
   - ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
   - ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç®¡ç†
   - æ–½ç­–ç®¡ç†
   - äºˆç®—ç®¡ç†
   - å®Ÿç¸¾ç®¡ç†
   - ãƒ¬ãƒãƒ¼ãƒˆ
   - è¨­å®šï¼ˆç®¡ç†è€…ã®ã¿ï¼‰

## å‚è€ƒã«ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«
ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚è€ƒã«ã—ã¦å®Ÿè£…ã—ã¦ãã ã•ã„ï¼š

### ä»•æ§˜æ›¸
- .kiro/specs/budget-management-system/claude-code-requirements.mdï¼ˆãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆï¼‰
- .kiro/specs/budget-management-system/design.mdï¼ˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã€UIè¨­è¨ˆï¼‰

### æ—¢å­˜å®Ÿè£…
- src/lib/auth.tsï¼ˆèªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã€æ¨©é™ç®¡ç†ï¼‰
- src/types/next-auth.d.tsï¼ˆèªè¨¼é–¢é€£ã®å‹å®šç¾©ï¼‰
- src/app/layout.tsxï¼ˆç¾åœ¨ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¨­å®šï¼‰

### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
- prisma/schema.prismaï¼ˆUserãƒ¢ãƒ‡ãƒ«ã®æ§‹é€ ï¼‰

## å®Ÿè£…ã®ãƒã‚¤ãƒ³ãƒˆ
- UserRole enumï¼ˆADMIN, MANAGER, MEMBERï¼‰ã«å¿œã˜ãŸãƒ¡ãƒ‹ãƒ¥ãƒ¼è¡¨ç¤ºåˆ¶å¾¡
- hasPermissioné–¢æ•°ã‚’ä½¿ç”¨ã—ãŸæ¨©é™ãƒã‚§ãƒƒã‚¯
- ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œã®ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼
- ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±è¡¨ç¤ºã¨ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½
```

## ğŸ“ å‚è€ƒãƒ•ã‚¡ã‚¤ãƒ«ã®å…·ä½“çš„ãªèª¬æ˜

### æ—¢å­˜API Routesï¼ˆè©²å½“ã™ã‚‹API Routesï¼‰
ç¾åœ¨å®Ÿè£…æ¸ˆã¿ã®APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼š

```
src/app/api/clients/route.ts
- GET /api/clientsï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä¸€è¦§å–å¾—ã€æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿å¯¾å¿œï¼‰
- POST /api/clientsï¼ˆæ–°è¦ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä½œæˆï¼‰
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å®Ÿè£…æ¸ˆã¿

src/app/api/campaigns/route.ts  
- GET /api/campaignsï¼ˆæ–½ç­–ä¸€è¦§å–å¾—ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆåˆ¥ãƒ•ã‚£ãƒ«ã‚¿å¯¾å¿œï¼‰
- POST /api/campaignsï¼ˆæ–°è¦æ–½ç­–ä½œæˆï¼‰
- æ—¥ä»˜æ¤œè¨¼ã€é–¢é€£ãƒ‡ãƒ¼ã‚¿ãƒã‚§ãƒƒã‚¯å®Ÿè£…æ¸ˆã¿

src/app/api/budgets/route.ts
- GET /api/budgetsï¼ˆäºˆç®—ä¸€è¦§å–å¾—ã€è¤‡æ•°ãƒ•ã‚£ãƒ«ã‚¿å¯¾å¿œï¼‰
- POST /api/budgetsï¼ˆäºˆç®—è¨­å®šã€é‡è¤‡ãƒã‚§ãƒƒã‚¯ï¼‰
- é›†è¨ˆãƒ‡ãƒ¼ã‚¿ã€ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¥ã‚µãƒãƒªãƒ¼æ©Ÿèƒ½

src/app/api/masters/route.ts
- GET /api/mastersï¼ˆãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿å–å¾—ï¼‰
- POST /api/mastersï¼ˆãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿ä½œæˆï¼‰
- ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã€é‹ç”¨ã‚¿ã‚¤ãƒ—ã€å ±é…¬ä½“ç³»ã®å®šç¾©
```

### æ—¢å­˜ã®å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«
ç¾åœ¨å­˜åœ¨ã™ã‚‹å‹å®šç¾©ï¼š

```
src/types/next-auth.d.ts
- NextAuth Sessionæ‹¡å¼µï¼ˆid, email, name, role, departmentï¼‰
- NextAuth Useræ‹¡å¼µï¼ˆèªè¨¼ç”¨ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ï¼‰
- JWTæ‹¡å¼µï¼ˆrole, departmentï¼‰
```

## ğŸ¯ Phase 2: å‹å®šç¾©ã‚·ã‚¹ãƒ†ãƒ ä½œæˆ

### Claude Codeã¸ã®ä¾é ¼æ–‡

```
äºˆç®—ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®å‹å®šç¾©ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

## ä½œæˆã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«
- src/types/index.tsï¼ˆãƒ¡ã‚¤ãƒ³ã®å‹å®šç¾©ï¼‰
- src/types/api.tsï¼ˆAPIé–¢é€£ã®å‹ï¼‰

## å‚è€ƒã«ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ
- prisma/schema.prismaï¼ˆUser, Client, Campaign, Budget, Result, Masterãƒ¢ãƒ‡ãƒ«ï¼‰

### æ—¢å­˜APIå®Ÿè£…
- src/app/api/clients/route.tsï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆAPIã®å®Ÿè£…ä¾‹ï¼‰
- src/app/api/campaigns/route.tsï¼ˆæ–½ç­–APIã®å®Ÿè£…ä¾‹ï¼‰
- src/app/api/budgets/route.tsï¼ˆäºˆç®—APIã®å®Ÿè£…ä¾‹ï¼‰
- src/app/api/masters/route.tsï¼ˆãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿APIã®å®Ÿè£…ä¾‹ï¼‰

### æ—¢å­˜å‹å®šç¾©
- src/types/next-auth.d.tsï¼ˆèªè¨¼é–¢é€£ã®å‹å®šç¾©ï¼‰

### ä»•æ§˜æ›¸
- .kiro/specs/budget-management-system/claude-code-requirements.mdï¼ˆå‹å®šç¾©ã®è©³ç´°ä¾‹ï¼‰

## è¦æ±‚ã™ã‚‹å‹å®šç¾©
1. ãƒ“ã‚¸ãƒã‚¹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼ˆClient, Campaign, Budget, Resultï¼‰
2. Enumå‹ï¼ˆPlatform, OperationType, RevenueTypeï¼‰
3. API ãƒ¬ã‚¹ãƒãƒ³ã‚¹å‹ï¼ˆApiResponse<T>, ApiErrorï¼‰
4. ãƒ•ã‚©ãƒ¼ãƒ ç”¨å‹ï¼ˆCreateClient, UpdateClientç­‰ï¼‰
5. ãƒ•ã‚£ãƒ«ã‚¿ãƒ»æ¤œç´¢ç”¨å‹

æ—¢å­˜APIã®å®Ÿè£…ã‚’å‚è€ƒã«ã€å®Ÿéš›ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã«åˆã‚ã›ã¦å‹å®šç¾©ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
```

## ğŸ¯ Phase 3: èªè¨¼ã‚·ã‚¹ãƒ†ãƒ å®Œæˆ

### Claude Codeã¸ã®ä¾é ¼æ–‡

```
èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã‚’å®Œæˆã•ã›ã¦ãã ã•ã„ã€‚

## ä¿®æ­£ãƒ»ä½œæˆã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«
- src/lib/auth.tsï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹èªè¨¼ã®å®Ÿè£…ï¼‰
- src/app/auth/signin/page.tsxï¼ˆãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ï¼‰
- src/app/api/auth/register/route.tsï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²APIï¼‰

## å‚è€ƒã«ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«

### ç¾åœ¨ã®èªè¨¼å®Ÿè£…
- src/lib/auth.tsï¼ˆç¾åœ¨ã¯é–‹ç™ºç”¨ç°¡æ˜“èªè¨¼ã®ã¿ï¼‰
- src/types/next-auth.d.tsï¼ˆèªè¨¼é–¢é€£å‹å®šç¾©ï¼‰

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š
- prisma/schema.prismaï¼ˆUserãƒ¢ãƒ‡ãƒ«ã€Accountã€Sessionï¼‰
- src/lib/prisma.tsï¼ˆPrismaã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¨­å®šï¼‰

### ä»•æ§˜æ›¸
- .kiro/specs/budget-management-system/design.mdï¼ˆèªè¨¼ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆï¼‰
- .kiro/specs/budget-management-system/claude-code-requirements.mdï¼ˆèªè¨¼è¦ä»¶ï¼‰

## å®Ÿè£…è¦ä»¶
1. bcryptã‚’ä½¿ç”¨ã—ãŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥åŒ–
2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼
3. æ¨©é™ãƒã‚§ãƒƒã‚¯ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
4. ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã®å¼·åŒ–
5. ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã®UIå®Ÿè£…

ç¾åœ¨ã®ç°¡æ˜“èªè¨¼ï¼ˆadmin@company.com / admin123ï¼‰ã‚’ã€å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹èªè¨¼ã«ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚
```

## ğŸ¯ Phase 4: APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä½œæˆ

### Claude Codeã¸ã®ä¾é ¼æ–‡

```
çµ±ä¸€ã•ã‚ŒãŸAPIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

## ä½œæˆã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«
- src/lib/api.tsï¼ˆçµ±ä¸€APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼‰
- src/hooks/useClients.ts
- src/hooks/useCampaigns.ts  
- src/hooks/useBudgets.ts
- src/hooks/useAuth.ts

## å‚è€ƒã«ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«

### æ—¢å­˜APIå®Ÿè£…
- src/app/api/clients/route.tsï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆAPIä»•æ§˜ï¼‰
- src/app/api/campaigns/route.tsï¼ˆæ–½ç­–APIä»•æ§˜ï¼‰
- src/app/api/budgets/route.tsï¼ˆäºˆç®—APIä»•æ§˜ï¼‰
- src/app/api/masters/route.tsï¼ˆãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿APIä»•æ§˜ï¼‰

### å‹å®šç¾©
- src/types/index.tsï¼ˆãƒ“ã‚¸ãƒã‚¹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å‹ï¼‰
- src/types/api.tsï¼ˆAPIé–¢é€£å‹ï¼‰

### èªè¨¼è¨­å®š
- src/lib/auth.tsï¼ˆèªè¨¼ã‚·ã‚¹ãƒ†ãƒ ï¼‰

## å®Ÿè£…è¦ä»¶
1. å‹å®‰å…¨ãªAPIå‘¼ã³å‡ºã—
2. çµ±ä¸€ã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
3. ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ç®¡ç†
4. CRUDæ“ä½œã®æŠ½è±¡åŒ–
5. React Query / SWRé¢¨ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½

æ—¢å­˜APIã®å®Ÿè£…ã‚’å‚è€ƒã«ã€å®Ÿéš›ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä»•æ§˜ã«åˆã‚ã›ã¦ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
```

## ğŸ“ ä¾é ¼æ™‚ã®æ³¨æ„ç‚¹

### 1. å¿…ãšæŒ‡å®šã™ã¹ãå‚è€ƒãƒ•ã‚¡ã‚¤ãƒ«
```
æ¯å›å¿…é ˆ:
- .kiro/specs/budget-management-system/claude-code-requirements.md
- prisma/schema.prisma

Phaseåˆ¥è¿½åŠ :
- Phase 1: src/lib/auth.ts, src/app/layout.tsx
- Phase 2: src/app/api/*/route.tsï¼ˆå…¨APIï¼‰
- Phase 3: src/types/next-auth.d.ts, src/lib/prisma.ts
- Phase 4: src/types/index.ts, æ—¢å­˜API Routes
```

### 2. å…·ä½“çš„ãªãƒ•ã‚¡ã‚¤ãƒ«åã®ä¼ãˆæ–¹
```
ã€Œæ—¢å­˜API Routesã€= ä»¥ä¸‹ã®4ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«:
- src/app/api/clients/route.ts
- src/app/api/campaigns/route.ts  
- src/app/api/budgets/route.ts
- src/app/api/masters/route.ts

ã€Œæ—¢å­˜ã®å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã€= ç¾åœ¨ã¯ä»¥ä¸‹ã®ã¿:
- src/types/next-auth.d.ts
```

### 3. æˆåŠŸã®ãƒã‚¤ãƒ³ãƒˆ
- ä»•æ§˜æ›¸ã‚’æœ€åˆã«èª­ã¾ã›ã‚‹
- æ—¢å­˜å®Ÿè£…ã‚’å‚è€ƒã¨ã—ã¦æ˜ç¤º
- å…·ä½“çš„ãªãƒ•ã‚¡ã‚¤ãƒ«åã‚’åˆ—æŒ™
- å®Ÿè£…è¦ä»¶ã‚’æ˜ç¢ºã«è¨˜è¼‰
- æ®µéšçš„ã«é€²ã‚ã‚‹ï¼ˆPhaseé †å®ˆï¼‰

ã“ã®å½¢å¼ã§Claude Codeã«ä¾é ¼ã™ã‚‹ã“ã¨ã§ã€ä¸€è²«æ€§ã®ã‚ã‚‹é«˜å“è³ªãªå®Ÿè£…ãŒæœŸå¾…ã§ãã¾ã™ã€‚